<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>La Cage Dorée - MOBILE ACCESS</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Noto+Serif+KR:wght@300;400;700&family=Share+Tech+Mono&display=swap');

        :root {
            --gold: #b38b48;
            --gold-light: #e6c88b;
            --red-alert: #8b0000;
            --black: #050505;
            --panel-bg: rgba(10, 10, 10, 0.95);
            --sys-font: 'Share Tech Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--black);
            color: #ccc;
            font-family: 'Noto Serif KR', serif;
            overflow: hidden;
            height: 100vh;
        }

        /* 스크롤바 */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; }

        /* ================= STAGE 1: INTRO ================= */
        #stage-intro {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #111 0%, #000 90%);
            z-index: 5000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 1s; padding: 20px;
        }

        #stage-intro::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(255, 0, 0, 0.02), rgba(255, 0, 0, 0.06));
            background-size: 100% 2px, 3px 100%; pointer-events: none;
        }

        .intro-status {
            font-family: var(--sys-font); color: var(--gold); font-size: 0.9rem; margin-bottom: 20px;
            letter-spacing: 2px; opacity: 0.8; text-align: center;
        }

        .envelope-wrapper { position: relative; width: 90%; max-width: 500px; cursor: pointer; }

        .envelope-box {
            width: 100%; display: block;
            animation: floating 4s ease-in-out infinite;
            transition: transform 0.5s, filter 0.5s;
            z-index: 10;
        }
        .envelope-box img { width: 100%; display: block; filter: drop-shadow(0 20px 30px #000); }
        
        .scan-line {
            position: absolute; top: 0; left: 0; width: 100%; height: 5px;
            background: var(--gold-light);
            box-shadow: 0 0 20px var(--gold-light);
            opacity: 0; z-index: 20; pointer-events: none;
        }

        .intro-hint {
            margin-top: 30px; font-family: var(--sys-font); color: #555; font-size: 0.8rem;
            animation: pulseText 2s infinite;
        }

        @keyframes pulseText { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
        @keyframes floating { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        .scanning .envelope-box { animation: shake 0.5s linear infinite; }
        .scanning .scan-line { opacity: 1; animation: scanDown 1.5s cubic-bezier(0.45, 0, 0.55, 1) forwards; }
        .scanning .envelope-wrapper { animation: suckIn 0.5s 1.2s forwards; }

        @keyframes scanDown { 0% { top: 0%; } 100% { top: 100%; } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-2px); } 75% { transform: translateX(2px); } }
        @keyframes suckIn { 
            0% { transform: scale(1); filter: brightness(1); opacity: 1; }
            100% { transform: scale(0); filter: brightness(5); opacity: 0; }
        }

        /* 패널 (모바일 대응) */
        #auth-panel {
            opacity: 0; display: none;
            flex-direction: column; align-items: center; gap: 20px;
            background: var(--panel-bg);
            padding: 40px 20px; border: 1px solid var(--gold);
            box-shadow: 0 0 80px rgba(0,0,0,0.9);
            position: relative; margin-top: -50px; 
            animation: panelAppear 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
            width: 90%; max-width: 400px;
        }
        @keyframes panelAppear { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .panel-title { font-family: 'Cinzel'; color: var(--gold); font-size: 1.1rem; margin-bottom: 5px; letter-spacing: 1px; text-align: center; }

        .pass-input {
            background: rgba(0,0,0,0.5); border: none; border-bottom: 2px solid #333;
            color: var(--gold); font-family: 'Noto Serif KR'; font-weight: 700;
            font-size: 1.2rem; text-align: center; padding: 10px; width: 100%; outline: none;
            transition: 0.3s; border-radius: 0;
        }
        .pass-input:focus { border-bottom-color: var(--gold); }

        /* 지문 인식 스캐너 */
        .fingerprint-container {
            position: relative; width: 90px; height: 90px;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; margin-top: 10px;
            border-radius: 50%; border: 1px solid #222;
            transition: 0.3s; background: radial-gradient(circle, #111 0%, #000 70%);
            -webkit-tap-highlight-color: transparent; /* 모바일 탭 박스 제거 */
        }
        .fingerprint-container:active { transform: scale(0.95); border-color: var(--gold); }
        
        .fingerprint-icon { width: 50px; height: 50px; fill: #444; transition: 0.3s; }
        
        .scan-beam {
            position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: var(--gold); box-shadow: 0 0 10px var(--gold);
            opacity: 0; pointer-events: none;
        }
        
        .fingerprint-container.scanning .fingerprint-icon { fill: #665c4a; }
        .fingerprint-container.scanning .scan-beam { opacity: 1; animation: beamScan 1.5s infinite linear; }
        .fingerprint-container.success { border-color: var(--gold); box-shadow: 0 0 30px var(--gold); }
        .fingerprint-container.success .fingerprint-icon { fill: var(--gold); animation: pulseGold 1s infinite; }

        @keyframes beamScan { 0% { top: 10%; opacity: 0; } 20% { opacity: 1; } 80% { opacity: 1; } 100% { top: 90%; opacity: 0; } }
        @keyframes pulseGold { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        .scan-msg { font-family: var(--sys-font); font-size: 0.7rem; color: #555; margin-top: -10px; }

        /* ================= TRANSITION & MAIN ================= */
        #stage-transition {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 4000; display: none;
            flex-direction: column; justify-content: center; align-items: center; padding: 20px;
        }
        .access-text {
            font-family: 'Noto Serif KR'; font-weight: 700; font-size: 2rem; color: var(--gold);
            text-align: center; line-height: 1.4; opacity: 0; transform: scale(0.9);
        }
        .access-text span { display: block; font-size: 1rem; font-family: var(--sys-font); color: #666; margin-top: 10px; }
        .access-text.reveal { animation: heavyReveal 3s forwards; }
        @keyframes heavyReveal {
            0% { opacity: 0; transform: scale(0.9); filter: blur(20px); }
            20% { opacity: 1; transform: scale(1.05); filter: blur(0); text-shadow: 0 0 30px var(--gold); }
            100% { opacity: 1; transform: scale(1); text-shadow: none; }
        }

        #main-content {
            display: none; opacity: 0; transition: opacity 2s;
            height: 100vh; overflow-y: auto; padding-bottom: 80px;
            position: relative;
        }

        /* HUD */
        #system-hud {
            position: fixed; top: 0; left: 0; width: 100%; height: 50px;
            background: rgba(5, 5, 5, 0.9); border-bottom: 1px solid #333;
            z-index: 3000; display: flex; justify-content: space-between; align-items: center;
            padding: 0 15px; font-family: var(--sys-font); color: #666; font-size: 0.75rem;
            backdrop-filter: blur(5px);
        }
        .hud-left { display: flex; gap: 15px; align-items: center; }
        .hud-right { display: flex; gap: 15px; align-items: center; }
        .hud-item { display: flex; align-items: center; gap: 5px; }
        .hud-label { color: #444; }
        .hud-value { color: var(--gold); font-weight: bold; }
        .live-dot { width: 6px; height: 6px; background: red; border-radius: 50%; animation: blinkSlow 2.5s infinite ease-in-out; }
        @keyframes blinkSlow { 0% { opacity: 1; box-shadow: 0 0 5px red; } 50% { opacity: 0.3; } 100% { opacity: 1; box-shadow: 0 0 5px red; } }
        .sanity-bar { width: 60px; height: 5px; background: #222; border: 1px solid #444; position: relative; }
        .sanity-fill { width: 92%; height: 100%; background: var(--gold); opacity: 0.7; }

        /* 로그: 모바일에서는 숨김 (화면 가림 방지) */
        #system-log {
            position: fixed; bottom: 10px; right: 10px; width: 250px; height: 100px;
            background: rgba(0,0,0,0.8); border: 1px solid #333;
            z-index: 2900; padding: 10px; font-family: var(--sys-font); font-size: 0.6rem;
            color: #555; overflow: hidden; pointer-events: none;
            display: flex; flex-direction: column; justify-content: flex-end;
        }
        .log-line { margin-bottom: 4px; border-bottom: 1px solid #111; padding-bottom: 2px; }
        .log-line:last-child { color: var(--gold); animation: flash 0.5s; }

        /* HERO */
        .hero {
            height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: radial-gradient(circle at center, rgba(0,0,0,0.3), #000), url('https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/lc3.jpeg');
            background-size: cover; background-position: center; background-attachment: fixed;
            position: relative; padding: 20px; text-align: center;
        }

        .hero-slogan { 
            font-family: 'Noto Serif KR', serif; font-size: 1rem; font-weight: 500; 
            letter-spacing: 4px; color: var(--gold); margin-bottom: 15px; 
            text-shadow: -1px -1px 0 #000, 1px 1px 0 #000, 0 0 20px rgba(0,0,0,0.9);
            background: rgba(0, 0, 0, 0.6); padding: 8px 15px; border-radius: 4px;
            backdrop-filter: blur(2px); border: 1px solid rgba(179, 139, 72, 0.4);
            white-space: nowrap; /* 줄바꿈 방지 */
            max-width: 90vw; overflow: hidden; text-overflow: ellipsis;
        }
        .hero h1 { 
            font-family: 'Cinzel', serif; font-weight: 900; font-size: 3.5rem; /* 모바일 사이즈 조정 */
            color: var(--gold); margin: 0; line-height: 1.1; text-shadow: 0 10px 50px #000; 
        }
        .hero-sub { 
            font-family: var(--sys-font); color: #888; font-size: 0.8rem; 
            margin-top: 20px; letter-spacing: 2px;
        }

        .scroll-down {
            position: absolute; bottom: 30px; color: var(--gold); 
            display: flex; flex-direction: column; align-items: center; gap: 5px; 
            animation: flashBounce 2s infinite ease-in-out; cursor: pointer; z-index: 20;
        }
        .scroll-down span:last-child { font-size: 1.8rem; text-shadow: 0 0 10px var(--gold); }
        @keyframes flashBounce { 
            0%, 100% { transform: translateY(0); opacity: 0.6; text-shadow: 0 0 5px #000; } 
            50% { transform: translateY(15px); opacity: 1; text-shadow: 0 0 20px var(--gold), 0 0 40px var(--gold-light); } 
        }

        /* CONTENT */
        section { max-width: 1200px; margin: 100px auto; padding: 0 20px; }
        .sec-header { text-align: center; margin-bottom: 50px; }
        .sec-title { font-family: 'Cinzel'; font-size: 2.2rem; color: var(--gold); margin-bottom: 10px; }
        .sec-desc { color: #888; font-size: 0.9rem; line-height: 1.6; word-break: keep-all; }

        /* 정보 그리드: 모바일은 1열 */
        .info-grid { display: grid; grid-template-columns: 1fr; gap: 30px; align-items: center; }
        .info-text h3 { color: var(--gold); font-family: 'Cinzel'; font-size: 1.3rem; margin-bottom: 15px; border-left: 3px solid var(--gold); padding-left: 10px; }
        .info-text p { color: #ccc; line-height: 1.6; margin-bottom: 15px; font-size: 0.95rem; }
        .info-img { width: 100%; height: 250px; background: #111; border: 1px solid #333; object-fit: cover; filter: grayscale(50%); transition: 0.5s; cursor: pointer;}
        
        .room-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; }
        .room-card { height: 200px; position: relative; border: 1px solid #333; overflow: hidden; cursor: pointer; }
        .room-bg { width: 100%; height: 100%; background-size: cover; background-position: center; transition: transform 0.5s; filter: grayscale(100%) brightness(0.5); }
        .room-card:hover .room-bg { transform: scale(1.1); filter: grayscale(0%) brightness(0.8); }
        .room-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 15px; background: linear-gradient(to top, #000, transparent); }
        .room-name { font-family: 'Cinzel'; font-size: 1.2rem; color: #fff; }

        .char-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .char-card { background: #0a0a0a; border: 1px solid #222; cursor: pointer; transition: 0.3s; }
        .char-img { width: 100%; height: 350px; background-size: cover; background-position: top center; filter: grayscale(100%); transition: 0.5s; }
        .char-card:hover .char-img { filter: grayscale(0%); }

        /* ★ 모달 반응형 수정 ★ */
        #modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 10000; display: none;
            justify-content: center; align-items: center; padding: 10px;
        }
        .modal-box {
            width: 100%; max-width: 900px; height: 90vh; background: #0e0e0e;
            border: 1px solid var(--gold); display: flex; 
            flex-direction: column; /* 모바일 기본: 세로 배치 */
            box-shadow: 0 0 50px rgba(0,0,0,0.8); position: relative;
            animation: modalOpen 0.3s ease-out;
        }
        
        /* PC 화면 (가로 769px 이상)일 때만 가로 배치 */
        @media (min-width: 769px) {
            .modal-box { flex-direction: row; height: 80vh; }
            .modal-left { width: 45%; height: 100%; }
            .modal-right { width: 55%; height: 100%; }
            .hero-slogan { font-size: 1.2rem; }
        }

        .modal-left { 
            width: 100%; height: 40%; /* 모바일: 이미지 상단 40% */
            border-bottom: 1px solid #333; position: relative; overflow: hidden; background: #000; 
        }
        
        .modal-main-img { 
            width: 100%; height: 100%; 
            background-size: cover; background-position: top center;
            transition: 0.3s; cursor: zoom-in;
        }

        .modal-right { 
            width: 100%; height: 60%; /* 모바일: 텍스트 하단 60% */
            padding: 30px 20px; overflow-y: auto; display: flex; flex-direction: column; 
        }
        
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 2rem; color: #fff; cursor: pointer; z-index: 20; text-shadow: 0 0 5px #000; }
        
        .gallery-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-top: 20px; padding-top: 15px; border-top: 1px solid #333; }
        .gallery-thumb { height: 60px; background-size: cover; background-position: center; border: 1px solid #333; filter: grayscale(100%); }

        .m-stamp { border: 2px solid #8b0000; color: #8b0000; font-family: 'Cinzel'; font-weight: 900; padding: 3px 10px; transform: rotate(-2deg); margin-bottom: 15px; font-size: 0.8rem; }
        .m-title { font-family: 'Cinzel'; font-size: 2rem; color: var(--gold); margin-bottom: 5px; line-height: 1; }
        .m-sub { font-family: var(--sys-font); color: #666; margin-bottom: 20px; font-size: 0.8rem; }
        .m-section { margin-bottom: 20px; }
        .m-label { font-family: var(--sys-font); color: var(--gold); font-size: 0.7rem; display: block; margin-bottom: 5px; border-bottom: 1px solid #333; padding-bottom: 3px; }
        .m-text { font-size: 0.95rem; line-height: 1.6; color: #ccc; white-space: pre-line; word-break: keep-all; }

        .redacted { background: #000; color: #000; padding: 0 3px; border: 1px solid #333; }
        .redacted::after { content: 'RESTRICTED'; position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #333; font-size: 0.5rem; }

        /* 라이트박스 */
        #lightbox-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,1); z-index: 11000; display: none;
            justify-content: center; align-items: center; cursor: zoom-out;
        }
        #lightbox-img { max-width: 100%; max-height: 100%; object-fit: contain; }

        footer { text-align: center; padding: 50px 0; color: #444; font-family: var(--sys-font); font-size: 0.7rem; border-top: 1px solid #222; }

        /* 모바일 전용 숨김/조정 */
        @media (max-width: 768px) {
            .hud-right { display: none; } /* HUD 오른쪽 숨김 */
            #system-log { display: none; } /* 로그 숨김 (화면 가림) */
            .hero-slogan { font-size: 0.8rem; letter-spacing: 2px; }
        }

    </style>
</head>
<body>

    <div id="youtube-player" style="display:none;"></div>

    <div id="stage-intro">
        <div class="intro-status" id="intro-status">ENCRYPTED SIGNAL DETECTED</div>
        <div class="envelope-wrapper" id="envelope-wrapper" onclick="processEnvelope()">
            <div class="scan-line"></div>
            <div class="envelope-box">
                <img src="https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/Generated%20Image%20January%2015%2C%202026%20-%209_30PM-Photoroom.png" alt="Invitation">
            </div>
        </div>
        <div class="intro-hint" id="intro-hint">TOUCH TO DECRYPT</div>

        <div id="auth-panel">
            <div class="panel-title">IDENTITY VERIFICATION</div>
            <input type="text" class="pass-input" id="pass-input" placeholder="CODE NAME" autocomplete="off" maxlength="12">
            
            <div class="fingerprint-container" id="fp-scanner">
                <div class="scan-beam"></div>
                <svg class="fingerprint-icon" viewBox="0 0 24 24">
                    <path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 2.72 12.01 2.72c-1.31 0-2.6.32-3.79.93-.95.49-1.52 1.37-1.52 2.35 0 .81.38 1.56 1.05 2.05.37.27.88.29 1.28.05.65-.39 1.15-.92 1.15-1.66 0-.31.18-.59.48-.74.37-.19.78-.29 1.2-.29 1.63 0 3.06.96 3.66 2.44.13.33.45.54.8.54.12 0 .24-.02.36-.07.47-.19.7-.72.51-1.19-.71-1.75-2.42-2.89-4.32-2.89-1.92 0-3.66 1.16-4.36 2.91-.07.17-.11.36-.11.55 0 .97.58 1.84 1.48 2.22.46.2 1 .01 1.22-.43.15-.3.12-.66-.08-.94-.37-.52-.57-1.13-.57-1.78 0-.58.34-1.1.86-1.36.19-.1.39-.14.6-.14.65 0 1.22.36 1.5 .95.53 1.11.8 2.33.8 3.59 0 1.94-.78 3.76-2.14 5.12-1.36 1.36-3.17 2.11-5.11 2.11-1.26 0-2.48-.27-3.59-.8-.44-.21-.97-.02-1.18.42-.21.44-.02.97.42 1.18 1.34.64 2.81.96 4.35.96 2.34 0 4.54-.91 6.18-2.55 1.64-1.64 2.55-3.83 2.55-6.18 0-1.51-.32-2.98-.96-4.33-.2-.43-.73-.61-1.16-.41z"/>
                    <path d="M12 21.75c-5.05 0-9.16-3.87-9.56-8.81-.04-.54-.51-.94-1.05-.9-.54.04-.94.51-.9.1.05.46 5.53 10.01 11.51 10.01 4.51 0 8.35-2.84 9.89-6.9.18-.47-.06-.99-.53-1.17-.47-.18-.99.06-1.17.53-1.29 3.4-4.5 5.78-8.28 5.78z"/>
                    <path d="M12.5 16c-.28 0-.5-.22-.5-.5 0-.28.22-.5.5-.5 1.38 0 2.5-1.12 2.5-2.5 0-.28.22-.5.5-.5s.5.22.5.5c0 1.93-1.57 3.5-3.5 3.5z"/>
                </svg>
            </div>
            <div class="scan-msg">PRESS & HOLD</div>
        </div>
    </div>

    <div id="stage-transition">
        <div class="access-text" id="access-text"></div>
    </div>

    <div id="main-content">
        <div id="system-hud">
            <div class="hud-left">
                <div class="hud-item"><span class="live-dot"></span> <span style="color:#8b0000; font-weight:bold;">LIVE</span></div>
                <div class="hud-item"><span class="hud-label">USER:</span> <span class="hud-value" id="hud-user">UNKNOWN</span></div>
            </div>
            <div class="hud-right">
                <div class="hud-item"><span class="hud-label">SANITY:</span> <div class="sanity-bar"><div class="sanity-fill"></div></div></div>
                <div class="hud-item" id="clock">00:00</div>
            </div>
        </div>

        <div id="system-log">
            <div class="log-line">[SYSTEM] Initializing connection...</div>
        </div>

        <div class="hero">
            <div class="hero-slogan">"욕망은 허락된 자만이 누릴 수 있다"</div>
            <h1>La Cage Dorée</h1>
            <p class="hero-sub">THE GOLDEN BIRDCAGE // PRIVATE SECTOR</p>
            <div class="scroll-down">
                <span style="font-family: var(--sys-font); font-size: 0.8rem;">SCROLL</span>
                <span style="font-size: 1.5rem;">↓</span>
            </div>
        </div>

        <section>
            <div class="sec-header">
                <h2 class="sec-title">The Sanctuary</h2>
                <div class="sec-desc">서울 강남 지하 깊은 곳, 선택받은 자들을 위한 황금 새장</div>
            </div>
            <div class="info-grid">
                <img src="https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/lc2.jpeg" class="info-img" alt="Club" onclick="openLightbox(this.src); addLog('User examined Club Interior')">
                <div class="info-text">
                    <h3>Membership Criteria</h3>
                    <ul>
                        <li>기존 회원의 추천 및 초대장 소지자</li>
                        <li>48시간 이내 발급된 <span class="redacted">유효한 의료 검진</span> 결과</li>
                        <li>사회적 지위 및 비밀 유지 서약 확인</li>
                    </ul>
                    <br>
                    <h3>Club Rules</h3>
                    <ul>
                        <li><strong>Mask:</strong> 입장 순간부터 퇴장 시까지 RFID 가면 착용 필수.</li>
                        <li><strong>Privacy:</strong> 실명 사용 금지. 오직 코드네임으로만 호칭.</li>
                        <li><strong>Consent:</strong> "No means no." 거부는 존중하되, <span class="redacted">침묵은 동의가 아님.</span></li>
                        <li><strong>Security:</strong> 모든 전자기기 반입 금지. 적발 시 영구 제명.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section>
            <div class="sec-header">
                <h2 class="sec-title">Facilities</h2>
                <div class="sec-desc">각기 다른 테마로 설계된 프라이빗 룸</div>
            </div>
            <div class="room-grid" id="room-grid"></div>
        </section>

        <section>
            <div class="sec-header">
                <h2 class="sec-title">Key Figures</h2>
                <div class="sec-desc">이곳을 움직이는 주요 인물들</div>
            </div>
            <div class="char-grid" id="char-grid"></div>
        </section>

        <footer>
            © 2026 La Cage Dorée. All rights reserved.<br>
            System ID: 938-A2 // Connection Secure.
        </footer>
    </div>

    <div id="modal-overlay" onclick="closeModal()">
        <div class="modal-box" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div class="modal-left">
                <div class="modal-main-img" id="m-img" onclick="openLightboxFromModal()"></div>
            </div>
            <div class="modal-right">
                <div class="m-stamp" id="m-stamp">CONFIDENTIAL</div>
                <h2 class="m-title" id="m-title">TITLE</h2>
                <div class="m-sub" id="m-sub">Subtitle</div>
                <div id="m-content-area"></div>
                <div class="gallery-grid" id="m-gallery"></div>
            </div>
        </div>
    </div>

    <div id="lightbox-overlay" onclick="closeLightbox()">
        <img id="lightbox-img" src="" alt="Full View">
    </div>

    <script>
        const YOUTUBE_ID = "bG_UV0owkkE"; 
        let currentUser = "GUEST"; 
        let currentModalImage = "";

        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx;
        let chargeOsc1, chargeOsc2, chargeGain;

        function initAudio() {
            if (!audioCtx) audioCtx = new AudioContext();
            if (audioCtx.state === 'suspended') audioCtx.resume();
        }

        function playScanSound() {
            if (!audioCtx) initAudio();
            const now = audioCtx.currentTime;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(100, now);
            osc.frequency.linearRampToValueAtTime(800, now + 1.5);
            gain.gain.setValueAtTime(0.05, now);
            gain.gain.linearRampToValueAtTime(0.1, now + 0.5);
            gain.gain.exponentialRampToValueAtTime(0.001, now + 1.5);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(now); osc.stop(now + 1.5);
        }

        function playKeySound() {
            if (!audioCtx) initAudio();
            const now = audioCtx.currentTime;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'triangle';
            osc.frequency.setValueAtTime(800 + Math.random() * 200, now);
            gain.gain.setValueAtTime(0.05, now);
            gain.gain.exponentialRampToValueAtTime(0.001, now + 0.05);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(now); osc.stop(now + 0.05);
        }

        document.getElementById('pass-input').addEventListener('input', playKeySound);

        function startChargeSound() {
            if (!audioCtx) initAudio();
            if (chargeOsc1) return;
            chargeGain = audioCtx.createGain();
            chargeGain.connect(audioCtx.destination);
            const now = audioCtx.currentTime;
            chargeOsc1 = audioCtx.createOscillator(); chargeOsc1.type = 'sine';
            chargeOsc1.frequency.setValueAtTime(40, now);
            chargeOsc1.frequency.linearRampToValueAtTime(80, now + 2.0);
            chargeOsc1.connect(chargeGain);
            chargeOsc2 = audioCtx.createOscillator(); chargeOsc2.type = 'triangle';
            chargeOsc2.frequency.setValueAtTime(60, now);
            chargeOsc2.frequency.linearRampToValueAtTime(100, now + 2.0);
            chargeOsc2.connect(chargeGain);
            chargeGain.gain.setValueAtTime(0, now);
            chargeGain.gain.linearRampToValueAtTime(0.3, now + 2.0);
            chargeOsc1.start(now); chargeOsc2.start(now);
        }

        function stopChargeSound() {
            if (chargeOsc1) {
                const now = audioCtx.currentTime;
                chargeGain.gain.cancelScheduledValues(now);
                chargeGain.gain.setValueAtTime(chargeGain.gain.value, now);
                chargeGain.gain.exponentialRampToValueAtTime(0.001, now + 0.05);
                chargeOsc1.stop(now + 0.05); chargeOsc2.stop(now + 0.05);
                chargeOsc1 = null; chargeOsc2 = null; chargeGain = null;
            }
        }

        function playUnlockSound() {
            if (!audioCtx) initAudio();
            const now = audioCtx.currentTime;
            const osc1 = audioCtx.createOscillator();
            const gain1 = audioCtx.createGain();
            osc1.type = 'sine';
            osc1.frequency.setValueAtTime(1500, now);
            gain1.gain.setValueAtTime(0.1, now);
            gain1.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
            osc1.connect(gain1); gain1.connect(audioCtx.destination);
            osc1.start(now); osc1.stop(now + 0.1);
            const osc2 = audioCtx.createOscillator();
            const gain2 = audioCtx.createGain();
            osc2.type = 'sine';
            osc2.frequency.setValueAtTime(2500, now + 0.15);
            gain2.gain.setValueAtTime(0.1, now + 0.15);
            gain2.gain.exponentialRampToValueAtTime(0.01, now + 0.4);
            osc2.connect(gain2); gain2.connect(audioCtx.destination);
            osc2.start(now + 0.15); osc2.stop(now + 0.4);
        }

        function playHoverSound() {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain();
            const now = audioCtx.currentTime;
            osc.type = 'sawtooth'; osc.frequency.setValueAtTime(40, now);
            gain.gain.setValueAtTime(0.05, now); gain.gain.exponentialRampToValueAtTime(0.001, now + 0.1);
            osc.connect(gain); gain.connect(audioCtx.destination); osc.start(now); osc.stop(now + 0.1);
        }

        // --- 데이터 ---
        const rooms = [
            { name: "흑단실 (Black Room)", img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/lc4.jpeg", status: "OCCUPIED", desc: "완벽한 어둠과 고립. 시각이 차단된 상태에서 극대화되는 감각을 즐기는 공간입니다. <span class='redacted'>구속구와 감각 박탈 장비</span>가 구비되어 있습니다." },
            { name: "거울방 (Mirror Room)", img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/lc5.jpeg", status: "VACANT", desc: "사방이 거울로 둘러싸인 방. 자신의 쾌락과 수치를 다각도에서 관찰할 수 있습니다. 조명 조절이 가능합니다." },
            { name: "비밀극장 (The Theater)", img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/lc1.jpeg", status: "SHOW 22:00", desc: "관음과 노출의 경계. 무대 위에서의 플레이와 그것을 지켜보는 관객석이 존재합니다. 익명성이 보장됩니다." },
            { name: "의상실 (Dressing Room)", img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/lc8.jpeg", status: "OPEN", desc: "다양한 코스튬과 도구가 준비된 공간. 당신의 페르소나를 완성하십시오." },
            { name: "상담실 (The Clinic)", img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/lc7.jpeg", status: "DR.WHITE", desc: "메디컬 플레이 및 심리 상담이 이루어지는 곳. 차가운 금속성과 소독약 냄새가 특징입니다." },
            { name: "V.I.P Suite", img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/lc9.jpeg", status: "RESTRICTED", desc: "오직 허가된 최상위 회원만 접근 가능한 스위트룸. <span class='redacted'>감시 카메라가 존재하지 않는 유일한 곳</span>입니다." }
        ];

        const characters = [
            { 
                id: 1, alias: "OBSIDIAN", name: "차도윤", role: "DOMINANT", 
                img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/a1.jpeg", 
                gallery: ["https://via.placeholder.com/150/111/555?text=Suit", "https://via.placeholder.com/150/111/555?text=Eyes", "https://via.placeholder.com/150/111/555?text=Hand", "https://via.placeholder.com/150/111/555?text=Shadow"],
                meta: "차도윤 | 28세 | CL그룹 후계자", pers: "고급스러움과 냉혹함. 말수가 적고 눈빛과 행동으로 압도함.", bg: "재벌 가문 출신. <span class='redacted'>가장 위험한 도미넌트</span>로 분류됨.", note: "통제광." 
            },
            { 
                id: 2, alias: "AURUM", name: "서율", role: "DOMINANT (SOFT)", 
                img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/a2.jpeg", 
                gallery: ["https://via.placeholder.com/150/222/555?text=Smile", "https://via.placeholder.com/150/222/555?text=Glasses", "https://via.placeholder.com/150/222/555?text=Book", "https://via.placeholder.com/150/222/555?text=Light"],
                meta: "서율 | 27세 | 심리상담사", pers: "다정하고 상냥하지만 심리를 장악하는 데 능함.", bg: "초보자를 다루는 데 특화됨. 내면 깊은 곳엔 <span class='redacted'>강한 독점욕</span>이 숨겨져 있음.", note: "경계 요망." 
            },
            { 
                id: 3, alias: "ECHO", name: "류이안", role: "SUBMISSIVE", 
                img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/a4.jpeg", 
                gallery: ["https://via.placeholder.com/150/151515/555?text=Stage", "https://via.placeholder.com/150/151515/555?text=Tears", "https://via.placeholder.com/150/151515/555?text=Collar", "https://via.placeholder.com/150/151515/555?text=Kneel"],
                meta: "류이안 | 26세 | 배우", pers: "무대 위에선 빛나지만 클럽에선 복종을 갈구함.", bg: "감정이 과열되면 <span class='redacted'>위험한 집착</span>으로 돌변할 수 있음.", note: "애정 결핍." 
            },
            {
                id: 4, alias: "GLASS", name: "노엘", role: "SWITCH",
                img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/d.jpeg", gallery: ["https://via.placeholder.com/150/1a1a1a/555?text=Lab", "https://via.placeholder.com/150/1a1a1a/555?text=Notes", "https://via.placeholder.com/150/1a1a1a/555?text=Toy", "https://via.placeholder.com/150/1a1a1a/555?text=Wink"],
                meta: "노엘 | 29세 | 행동 심리학자", pers: "장난기 많지만 거리감 유지. 영어를 섞어 씀.", bg: "유저를 연구 대상으로 여김. <span class='redacted'>실험적인 플레이</span>를 즐김.", note: "예측 불가."
            },
            {
                id: 5, alias: "RENAULT", name: "르노", role: "OWNER",
                img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/c.jpeg", gallery: ["https://via.placeholder.com/150/0d0d0d/555?text=Cigar", "https://via.placeholder.com/150/0d0d0d/555?text=Silhouette", "https://via.placeholder.com/150/0d0d0d/555?text=Office", "https://via.placeholder.com/150/0d0d0d/555?text=Ring"],
                meta: "르노 | 미상 | 클럽 오너", pers: "조용하지만 사람을 꿰뚫는 통찰력.", bg: "클럽의 절대 권력자. 과거 신원 불명.", note: "접근 주의."
            },
            {
                id: 6, alias: "WHITE MISTRESS", name: "진보라", role: "DOMINA",
                img: "https://pub-7c1beb3ad40844ff87d9eb2fad52b153.r2.dev/a3.jpeg", gallery: ["https://via.placeholder.com/150/202020/555?text=Heels", "https://via.placeholder.com/150/202020/555?text=Whip", "https://via.placeholder.com/150/202020/555?text=Lip", "https://via.placeholder.com/150/202020/555?text=Art"],
                meta: "진보라 | 29세 | 큐레이터", pers: "냉정하고 도도함. 사람을 미술품처럼 감상.", bg: "클럽 규칙 위반자를 즉시 제재함. 과거 <span class='redacted'>차도윤의 연인</span>.", note: "규칙 엄수."
            }
        ];

        const roomGrid = document.getElementById('room-grid');
        rooms.forEach(room => {
            const div = document.createElement('div');
            div.className = 'room-card';
            div.onclick = () => { openRoomModal(room); addLog(`Accessing Facility: ${room.name}`); };
            div.innerHTML = `
                <div class="room-bg" style="background-image: url('${room.img}')"></div>
                <div class="room-overlay">
                    <div class="room-name">${room.name}</div>
                    <div class="room-meta">${room.status}</div>
                </div>
            `;
            roomGrid.appendChild(div);
        });

        const charGrid = document.getElementById('char-grid');
        characters.forEach(c => {
            const div = document.createElement('div');
            div.className = 'char-card';
            div.onclick = () => { openCharModal(c); addLog(`Viewing Profile: ${c.alias}`); };
            div.innerHTML = `
                <div class="char-img" style="background-image: url('${c.img}')"></div>
                <div class="char-info">
                    <div class="c-alias">${c.alias}</div>
                    <div class="c-role">${c.role}</div>
                </div>
            `;
            charGrid.appendChild(div);
        });

        const modal = document.getElementById('modal-overlay');
        const mImg = document.getElementById('m-img');
        const mTitle = document.getElementById('m-title');
        const mSub = document.getElementById('m-sub');
        const mContent = document.getElementById('m-content-area');
        const mGallery = document.getElementById('m-gallery');
        const mStamp = document.getElementById('m-stamp');

        function setModalImage(src) {
            currentModalImage = src;
            mImg.style.backgroundImage = `url('${src}')`;
        }

        function openRoomModal(room) {
            setModalImage(room.img);
            mStamp.innerText = "FACILITY";
            mStamp.style.color = "#ccc"; mStamp.style.borderColor = "#ccc";
            mTitle.innerText = room.name.split(' (')[0];
            mSub.innerText = room.status;
            mContent.innerHTML = `<div class="m-section"><span class="m-label">DESCRIPTION</span><p class="m-text">${room.desc}</p></div>`;
            mGallery.style.display = 'none';
            modal.style.display = 'flex';
            attachRedactedEvent();
        }

        function openCharModal(c) {
            setModalImage(c.img);
            mStamp.innerText = "TOP SECRET";
            mStamp.style.color = "#8b0000"; mStamp.style.borderColor = "#8b0000";
            mTitle.innerText = c.alias;
            mSub.innerText = c.meta;
            mContent.innerHTML = `
                <div class="m-section"><span class="m-label">PERSONALITY</span><p class="m-text">${c.pers}</p></div>
                <div class="m-section"><span class="m-label">BACKGROUND</span><p class="m-text">${c.bg}</p></div>
                <div class="m-section"><span class="m-label">NOTES</span><p class="m-text" style="color:#888; font-style:italic;">${c.note}</p></div>
            `;
            mGallery.innerHTML = '';
            mGallery.style.display = 'grid';
            if(c.gallery && c.gallery.length > 0) {
                c.gallery.forEach(src => {
                    const thumb = document.createElement('div');
                    thumb.className = 'gallery-thumb';
                    thumb.style.backgroundImage = `url('${src}')`;
                    thumb.onclick = () => { setModalImage(src); };
                    mGallery.appendChild(thumb);
                });
            }
            modal.style.display = 'flex';
            attachRedactedEvent();
        }

        function closeModal() { modal.style.display = 'none'; }
        
        const lightbox = document.getElementById('lightbox-overlay');
        const lightboxImg = document.getElementById('lightbox-img');

        function openLightbox(src) {
            lightboxImg.src = src;
            lightbox.style.display = 'flex';
            playKeySound();
        }
        
        function openLightboxFromModal() {
            if(currentModalImage) openLightbox(currentModalImage);
        }

        function closeLightbox() {
            lightbox.style.display = 'none';
        }

        function attachRedactedEvent() {
            document.querySelectorAll('.redacted').forEach(el => {
                el.addEventListener('mouseenter', () => {
                    playHoverSound();
                    addLog("Warning: Restricted info accessed");
                });
            });
        }

        function processEnvelope() {
            initAudio();
            playScanSound(); 
            
            const wrapper = document.getElementById('envelope-wrapper');
            const status = document.getElementById('intro-status');
            const hint = document.getElementById('intro-hint');

            status.innerText = "VERIFYING ENCRYPTION KEY...";
            status.style.color = "#fff";
            hint.style.display = 'none';
            wrapper.classList.add('scanning');

            setTimeout(() => {
                wrapper.style.display = 'none';
                status.style.display = 'none';
                document.getElementById('auth-panel').style.display = 'flex';
            }, 1600);
        }

        const fpScanner = document.getElementById('fp-scanner');
        let holdTimer;
        let isHolding = false;

        function startHold(e) {
            if (e.button && e.button !== 0) return;
            const inputVal = document.getElementById('pass-input').value.trim();
            
            if(inputVal.length < 1) {
                document.getElementById('pass-input').style.borderBottomColor = '#8b0000';
                return;
            }
            currentUser = inputVal; 

            isHolding = true;
            fpScanner.classList.add('scanning'); 
            startChargeSound();
            
            holdTimer = setTimeout(() => {
                if (isHolding) {
                    stopChargeSound();
                    playUnlockSound();
                    fpScanner.classList.remove('scanning');
                    fpScanner.classList.add('success'); 
                    grantAccess();
                    isHolding = false;
                }
            }, 2000);
        }

        function endHold() {
            if (!isHolding) return;
            isHolding = false;
            clearTimeout(holdTimer);
            stopChargeSound();
            fpScanner.classList.remove('scanning'); 
        }

        fpScanner.addEventListener('mousedown', startHold);
        window.addEventListener('mouseup', endHold);
        fpScanner.addEventListener('touchstart', (e) => { e.preventDefault(); startHold(e); });
        window.addEventListener('touchend', endHold);

        function grantAccess() {
            document.getElementById('stage-intro').style.display = 'none';
            const trans = document.getElementById('stage-transition');
            const accessText = document.getElementById('access-text');
            
            accessText.innerHTML = `${currentUser}님,<br>승인되었습니다.<br><span>ACCESS GRANTED</span>`;
            document.getElementById('hud-user').innerText = currentUser.toUpperCase();

            trans.style.display = 'flex';
            accessText.classList.add('reveal');
            
            if(player && player.playVideo) { player.playVideo(); player.setVolume(70); }
            
            setTimeout(() => {
                trans.style.opacity = 0;
                trans.style.transition = 'opacity 1.5s ease';
                setTimeout(() => {
                    trans.style.display = 'none';
                    const main = document.getElementById('main-content');
                    main.style.display = 'block';
                    setTimeout(() => {
                        main.style.opacity = 1;
                        addLog(`User [${currentUser}] connected.`);
                        addLog("Biometric data synced.");
                    }, 100);
                }, 1500);
            }, 3000);
        }

        setInterval(() => {
            const d = new Date();
            const min = String(d.getMinutes()).padStart(2, '0');
            const sec = String(d.getSeconds()).padStart(2, '0');
            document.getElementById('clock').innerText = d.getHours() + ':' + min + ':' + sec;
        }, 1000);

        const logBox = document.getElementById('system-log');
        function addLog(msg) {
            const line = document.createElement('div');
            line.className = 'log-line';
            const time = new Date().toTimeString().split(' ')[0];
            line.innerText = `[${time}] ${msg}`;
            logBox.appendChild(line);
            if(logBox.children.length > 6) {
                logBox.removeChild(logBox.firstChild);
            }
        }

        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '0', width: '0', videoId: YOUTUBE_ID,
                playerVars: { 'autoplay': 0, 'controls': 0, 'loop': 1, 'playlist': YOUTUBE_ID }
            });
        }
    </script>
</body>
</html>
